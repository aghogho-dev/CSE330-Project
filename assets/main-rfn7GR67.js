(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=e(o);fetch(o.href,s)}})();const E="dce09b81ce070af51980ecb8304f70a6",u=document.getElementById("hero"),p=document.getElementById("movie-show"),L=document.getElementById("tv-show"),w=[889737,106646,1186947,1248753,872585,475557],C=[2734,37680,1668],h=[519182,1184918,1022789,1159311,1354627];function f(t){const n=`https://api.themoviedb.org/3/movie/${t}?api_key=${E}&append_to_response=images`;return fetch(n).then(e=>{if(!e.ok)throw new Error(`HTTP Error! status: ${e.status}`);return e.json()}).catch(e=>(console.error(`Failed to fetch movie with ID ${t}: ${e.message}`),null))}function b(t){const n=`https://api.themoviedb.org/3/tv/${t}?api_key=${E}&append_to_response=images`;return fetch(n).then(e=>{if(!e.ok)throw new Error(`HTTP Error! status: ${respons.status}`);return e.json()}).catch(e=>{console.error(`Failed to fetch TV show with ID ${t}: ${e.message}`)})}function M(t){if(!t){const d=document.createElement("div");d.classList.add("error"),d.textContent="Failed to load TV show details";return}const n=document.createElement("div");n.classList.add("tv");const e=document.createElement("img");e.setAttribute("src",`https://image.tmdb.org/t/p/w500/${t.poster_path}`),e.setAttribute("alt",`${t.name}`),e.setAttribute("loading","lazy");const r=document.createElement("button");r.classList.add("open-modal"),r.textContent="Learn More";const o=document.createElement("div");o.classList.add("describe-tv");const s=document.createElement("h3");s.textContent="Description";const a=document.createElement("p");a.innerHTML=`<strong>First Air Date:</strong> ${t.first_air_date}<br><strong>Last Air Date:</strong> ${t.last_air_date}`;const m=document.createElement("p");m.textContent=t.overview,o.appendChild(s),o.appendChild(a),o.appendChild(m);const c=document.createElement("dialog");c.classList.add("modal");const i=document.createElement("button");i.classList.add("close-modal"),i.textContent="❌",c.appendChild(o),c.appendChild(i),n.appendChild(e),n.appendChild(r),n.appendChild(c),L.appendChild(n),r.addEventListener("click",()=>{c.showModal()}),i.addEventListener("click",()=>{c.close()})}function g(t,n){if(!t){const e=document.createElement("div");e.classList.add("error"),e.textContent="Failed to load movie details",n?u.appendChild(e):p.appendChild(error);return}if(n)u.innerHTML=`<img src="https://image.tmdb.org/t/p/w500/${t.poster_path}" alt="${t.title}" loading="lazy">`;else{const e=document.createElement("div");e.classList.add("movie");const r=document.createElement("img");r.setAttribute("src",`https://image.tmdb.org/t/p/w500/${t.poster_path}`),r.setAttribute("alt",`${t.title}`),r.setAttribute("loading","lazy");const o=document.createElement("button");o.classList.add("open-modal"),o.textContent="Learn More";const s=document.createElement("div");s.classList.add("describe-movie");const a=document.createElement("h3");a.textContent="Description";const m=document.createElement("p");m.innerHTML=`<strong>Release Date:</strong> ${t.release_date}`;const c=document.createElement("p");c.textContent=t.overview,s.appendChild(a),s.appendChild(m),s.appendChild(c);const i=document.createElement("dialog");i.classList.add("modal");const d=document.createElement("button");d.classList.add("close-modal"),d.textContent="❌",i.appendChild(s),i.appendChild(d),e.appendChild(r),e.appendChild(o),e.appendChild(i),p.appendChild(e),o.addEventListener("click",()=>{i.showModal()}),d.addEventListener("click",()=>{i.close()})}}function y(t){if(!t)w.forEach(n=>{f(n).then(e=>{g(e,!1)})});else{const n=Math.floor(Math.random()*h.length),e=h[n];f(e).then(r=>{g(r,!0)})}}function $(){C.forEach(t=>{b(t).then(n=>{M(n)})})}async function T(){const t=await loadTemplate("../partials/header.html"),n=document.querySelector(".headerElement"),e=await loadTemplate("../partials/footer.html"),r=document.querySelector(".footerElement");renderWithTemplate(t,n),renderWithTemplate(e,r)}T();const v=document.querySelector("#menu-btn"),D=document.querySelector("#menu-links");v.addEventListener("click",()=>{D.classList.toggle("open"),v.classList.toggle("open")});const I=document.querySelector("#current-year"),S=document.querySelector("#last-modified"),l=new Date;I.innerHTML=`${l.getFullYear()}`;S.innerHTML=`Last Modification: ${l.getDate()}/${l.getMonth()}/${l.getFullYear()} ${l.getHours()}:${l.getMinutes()}:${l.getSeconds()}`;const _=document.getElementById("visitor-message");function x(){const t=localStorage.getItem("lastVisit"),n=new Date,e=H(t,n);localStorage.setItem("lastVisit",n.toISOString()),e&&(_.innerHTML=e)}function H(t,n){if(!t)return"Welcome! Let us know if you have any questions.";const e=new Date(t),r=Math.abs(n-e),o=Math.floor(r/(1e3*60*60*24));return o<1?"Back so soon! Awesome!":`You last visited ${o} ${o===1?"day":"days"} ago.`}window.onload=x;y(!0);y(!1);$();
